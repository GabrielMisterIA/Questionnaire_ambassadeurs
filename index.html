<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formation IA Générative - Lagardère</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    }
    
    body {
      background: #ffffff;
      min-height: 100vh;
    }
    
    .container {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    .progress-bar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: #f3f4f6;
      z-index: 50;
    }
    
    .progress-fill {
      height: 100%;
      background: #3b82f6;
      transition: width 0.5s ease-out;
    }
    
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 24px;
      border-bottom: 1px solid #f3f4f6;
    }
    
    .header-title {
      font-size: 14px;
      font-weight: 500;
      color: #4b5563;
    }
    
    .header-count {
      font-size: 14px;
      color: #9ca3af;
    }
    
    .main {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 48px 24px;
    }
    
    .question-container {
      max-width: 576px;
      width: 100%;
      margin: 0 auto;
    }
    
    .intro {
      text-align: center;
    }
    
    .badge {
      display: inline-block;
      padding: 6px 16px;
      background: #eff6ff;
      color: #2563eb;
      font-size: 14px;
      font-weight: 500;
      border-radius: 9999px;
      margin-bottom: 24px;
    }
    
    .intro h1 {
      font-size: 32px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 16px;
      line-height: 1.2;
    }
    
    .intro p {
      font-size: 18px;
      color: #6b7280;
      line-height: 1.6;
    }
    
    .intro .time {
      font-size: 14px;
      color: #9ca3af;
      margin-top: 32px;
    }
    
    .question-title {
      font-size: 28px;
      font-weight: 500;
      color: #111827;
      margin-bottom: 8px;
    }
    
    .question-subtitle {
      color: #9ca3af;
      margin-bottom: 24px;
    }
    
    .text-input {
      width: 100%;
      font-size: 24px;
      padding: 12px 0;
      border: none;
      border-bottom: 2px solid #e5e7eb;
      background: transparent;
      outline: none;
      transition: border-color 0.2s;
    }
    
    .text-input:focus {
      border-bottom-color: #3b82f6;
    }
    
    .text-input::placeholder {
      color: #d1d5db;
    }
    
    .input-hint {
      font-size: 14px;
      color: #9ca3af;
      margin-top: 16px;
    }
    
    .input-hint span {
      padding: 2px 8px;
      background: #f3f4f6;
      border-radius: 4px;
      color: #6b7280;
      font-weight: 500;
    }
    
    .textarea {
      width: 100%;
      font-size: 18px;
      padding: 16px;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      background: #f9fafb;
      outline: none;
      resize: none;
      transition: border-color 0.2s, box-shadow 0.2s;
      min-height: 120px;
    }
    
    .textarea:focus {
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    
    .textarea::placeholder {
      color: #9ca3af;
    }
    
    .options {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-top: 24px;
    }
    
    .option-btn {
      width: 100%;
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px;
      border: 2px solid #e5e7eb;
      border-radius: 12px;
      background: white;
      cursor: pointer;
      text-align: left;
      transition: all 0.2s;
    }
    
    .option-btn:hover {
      border-color: #d1d5db;
      background: #f9fafb;
    }
    
    .option-btn.selected {
      border-color: #3b82f6;
      background: #eff6ff;
    }
    
    .option-letter {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 500;
      background: #f3f4f6;
      color: #6b7280;
      flex-shrink: 0;
    }
    
    .option-btn.selected .option-letter {
      background: #3b82f6;
      color: white;
    }
    
    .option-content {
      flex: 1;
    }
    
    .option-label {
      font-weight: 500;
      color: #374151;
    }
    
    .option-btn.selected .option-label {
      color: #1d4ed8;
    }
    
    .option-desc {
      font-size: 14px;
      color: #9ca3af;
      margin-top: 2px;
    }
    
    .tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 24px;
    }
    
    .tag-btn {
      padding: 10px 16px;
      border: 2px solid #e5e7eb;
      border-radius: 9999px;
      background: white;
      font-weight: 500;
      color: #4b5563;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 14px;
    }
    
    .tag-btn:hover {
      border-color: #d1d5db;
      background: #f9fafb;
    }
    
    .tag-btn.selected {
      border-color: #3b82f6;
      background: #eff6ff;
      color: #2563eb;
    }
    
    .nav {
      padding: 16px 24px;
      border-top: 1px solid #f3f4f6;
    }
    
    .nav-inner {
      max-width: 576px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .btn {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 24px;
      border-radius: 8px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      border: none;
      font-size: 16px;
    }
    
    .btn-back {
      background: transparent;
      color: #6b7280;
    }
    
    .btn-back:hover {
      background: #f3f4f6;
    }
    
    .btn-next {
      background: #3b82f6;
      color: white;
    }
    
    .btn-next:hover {
      background: #2563eb;
    }
    
    .btn-next:disabled {
      background: #f3f4f6;
      color: #9ca3af;
      cursor: not-allowed;
    }
    
    .btn-submit {
      background: #10b981;
      color: white;
    }
    
    .btn-submit:hover {
      background: #059669;
    }
    
    .btn-submit:disabled {
      background: #f3f4f6;
      color: #9ca3af;
      cursor: not-allowed;
    }
    
    .invisible {
      visibility: hidden;
    }
    
    .success {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
    }
    
    .success-content {
      max-width: 400px;
      text-align: center;
    }
    
    .success-icon {
      width: 64px;
      height: 64px;
      background: #ecfdf5;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 24px;
    }
    
    .success-icon svg {
      width: 32px;
      height: 32px;
      color: #10b981;
    }
    
    .success h2 {
      font-size: 24px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 12px;
    }
    
    .success p {
      color: #6b7280;
      line-height: 1.6;
    }
    
    .success .footer {
      font-size: 14px;
      color: #9ca3af;
      margin-top: 24px;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .spinner {
      animation: spin 1s linear infinite;
      width: 16px;
      height: 16px;
    }
    
    @media (max-width: 640px) {
      .intro h1 { font-size: 24px; }
      .question-title { font-size: 22px; }
      .text-input { font-size: 20px; }
    }
  </style>
</head>
<body>
  <div id="app"></div>
  
  <script>
    const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzt9h5Q8HVHCTBzB1FbZnfcJ8vyZkdTD-DuGeFKKD7ChOW8tY39CsGLaPwlhqO6OuS1/exec';

    const questions = [
      { id: 'intro', type: 'intro' },
      { id: 'prenom', type: 'text', field: 'prenom', question: 'Quel est votre prénom ?', placeholder: 'Entrez votre prénom', required: true },
      { id: 'nom', type: 'text', field: 'nom', question: 'Et votre nom ?', placeholder: 'Entrez votre nom', required: true },
      { id: 'email', type: 'email', field: 'email', question: 'Votre email professionnel ?', placeholder: 'prenom.nom@lagardere.com', required: true },
      { id: 'departement', type: 'text', field: 'departement', question: 'Dans quel département travaillez-vous ?', placeholder: 'Ex: Lagardère Publishing, Marketing, RH...', required: true },
      { id: 'niveauIA', type: 'single', field: 'niveauIA', question: "Quel est votre niveau avec l'IA générative ?", options: [
        { value: 'debutant', label: 'Débutant', desc: 'Je découvre tout juste' },
        { value: 'curieux', label: 'Curieux', desc: "J'ai testé quelques fois" },
        { value: 'regulier', label: 'Utilisateur régulier', desc: "Je l'utilise chaque semaine" },
        { value: 'avance', label: 'Avancé', desc: 'Je maîtrise plusieurs outils' }
      ], required: true },
      { id: 'outilsUtilises', type: 'multiple', field: 'outilsUtilises', question: 'Quels outils avez-vous déjà utilisés ?', subtitle: "Sélectionnez tous ceux qui s'appliquent", options: ['ChatGPT', 'Claude', 'Copilot', 'Gemini', 'Mistral', 'Perplexity', 'Autre', 'Aucun'], required: false },
      { id: 'frequenceUtilisation', type: 'single', field: 'frequenceUtilisation', question: "À quelle fréquence utilisez-vous l'IA ?", options: [
        { value: 'jamais', label: 'Jamais' },
        { value: 'rarement', label: 'Quelques fois par mois' },
        { value: 'regulierement', label: 'Plusieurs fois par semaine' },
        { value: 'quotidien', label: 'Tous les jours' }
      ], required: true },
      { id: 'casUsageActuels', type: 'textarea', field: 'casUsageActuels', question: "Comment utilisez-vous l'IA aujourd'hui ?", subtitle: 'Décrivez vos usages actuels, même basiques', placeholder: 'Ex: Je pose des questions, je fais relire mes emails, je génère des idées...', required: false },
      { id: 'questionsFormation', type: 'textarea', field: 'questionsFormation', question: "Quelles questions vous posez-vous sur l'IA ?", subtitle: 'Vos interrogations, doutes, curiosités...', placeholder: "Ex: Comment bien formuler mes demandes ? Est-ce fiable ?", required: false },
      { id: 'pointsBloquants', type: 'textarea', field: 'pointsBloquants', question: 'Quels sont vos points bloquants actuels ?', subtitle: 'Ce qui vous freine ou vous pose problème', placeholder: 'Ex: Je ne sais pas par où commencer, les résultats ne sont pas satisfaisants...', required: false },
      { id: 'attentesFormation', type: 'multiple', field: 'attentesFormation', question: "Qu'attendez-vous de cette formation ?", subtitle: 'Sélectionnez vos priorités', options: ["Comprendre les bases de l'IA générative", 'Apprendre à rédiger de bons prompts', "Découvrir des cas d'usage concrets", 'Gagner du temps au quotidien', 'Comprendre les limites et risques', 'Découvrir de nouveaux outils'], required: true },
      { id: 'casUsageSouhaites', type: 'textarea', field: 'casUsageSouhaites', question: "Quels cas d'usage aimeriez-vous explorer ?", subtitle: "Les tâches où l'IA pourrait vous aider", placeholder: 'Ex: Rédiger des emails, synthétiser des documents, préparer des réunions...', required: false }
    ];

    let state = {
      currentQuestion: 0,
      isSubmitting: false,
      isSubmitted: false,
      formData: {
        prenom: '', nom: '', email: '', departement: '', niveauIA: '',
        outilsUtilises: [], frequenceUtilisation: '', casUsageActuels: '',
        questionsFormation: '', pointsBloquants: '', attentesFormation: [], casUsageSouhaites: ''
      }
    };

    function render() {
      const app = document.getElementById('app');
      
      if (state.isSubmitted) {
        app.innerHTML = `
          <div class="success">
            <div class="success-content">
              <div class="success-icon">
                <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
              </div>
              <h2>Merci ${state.formData.prenom} !</h2>
              <p>Vos réponses ont bien été enregistrées. Elles nous aideront à personnaliser la formation pour qu'elle réponde au mieux à vos besoins.</p>
              <p class="footer">À très bientôt pour la formation !</p>
            </div>
          </div>
        `;
        return;
      }

      const q = questions[state.currentQuestion];
      const progress = (state.currentQuestion / (questions.length - 1)) * 100;
      const canProceed = checkCanProceed();

      let questionHTML = '';
      
      if (q.type === 'intro') {
        questionHTML = `
          <div class="intro">
            <span class="badge">Programme Ambassadeurs IA</span>
            <h1>Préparez votre formation<br>IA Générative</h1>
            <p>Quelques questions pour personnaliser la formation selon vos besoins et votre niveau.</p>
            <p class="time">⏱ Environ 3 minutes</p>
          </div>
        `;
      } else if (q.type === 'text' || q.type === 'email') {
        questionHTML = `
          <div class="question-container">
            <h2 class="question-title">${q.question}</h2>
            ${q.subtitle ? `<p class="question-subtitle">${q.subtitle}</p>` : ''}
            <input type="${q.type}" class="text-input" placeholder="${q.placeholder}" value="${state.formData[q.field]}" id="input-field">
            <p class="input-hint">Appuyez sur <span>Entrée ↵</span> pour continuer</p>
          </div>
        `;
      } else if (q.type === 'textarea') {
        questionHTML = `
          <div class="question-container">
            <h2 class="question-title">${q.question}</h2>
            ${q.subtitle ? `<p class="question-subtitle">${q.subtitle}</p>` : ''}
            <textarea class="textarea" placeholder="${q.placeholder}" id="input-field" rows="4">${state.formData[q.field]}</textarea>
          </div>
        `;
      } else if (q.type === 'single') {
        const optionsHTML = q.options.map((opt, i) => {
          const value = typeof opt === 'string' ? opt : opt.value;
          const label = typeof opt === 'string' ? opt : opt.label;
          const desc = typeof opt === 'object' ? opt.desc : null;
          const selected = state.formData[q.field] === value ? 'selected' : '';
          const letter = String.fromCharCode(65 + i);
          return `
            <button class="option-btn ${selected}" data-value="${value}">
              <span class="option-letter">${letter}</span>
              <div class="option-content">
                <span class="option-label">${label}</span>
                ${desc ? `<p class="option-desc">${desc}</p>` : ''}
              </div>
            </button>
          `;
        }).join('');
        
        questionHTML = `
          <div class="question-container">
            <h2 class="question-title">${q.question}</h2>
            ${q.subtitle ? `<p class="question-subtitle">${q.subtitle}</p>` : ''}
            <div class="options">${optionsHTML}</div>
          </div>
        `;
      } else if (q.type === 'multiple') {
        const tagsHTML = q.options.map(opt => {
          const selected = state.formData[q.field].includes(opt) ? 'selected' : '';
          const check = selected ? '✓ ' : '';
          return `<button class="tag-btn ${selected}" data-value="${opt}">${check}${opt}</button>`;
        }).join('');
        
        questionHTML = `
          <div class="question-container">
            <h2 class="question-title">${q.question}</h2>
            ${q.subtitle ? `<p class="question-subtitle">${q.subtitle}</p>` : ''}
            <div class="tags">${tagsHTML}</div>
          </div>
        `;
      }

      const isLastQuestion = state.currentQuestion >= questions.length - 1;
      const submitBtnContent = state.isSubmitting 
        ? `<svg class="spinner" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none" opacity="0.25"/><path fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" opacity="0.75"/></svg> Envoi...`
        : `Envoyer <svg width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>`;

      app.innerHTML = `
        <div class="container">
          <div class="progress-bar">
            <div class="progress-fill" style="width: ${progress}%"></div>
          </div>
          
          <div class="header">
            <span class="header-title">Lagardère × Mister IA</span>
            <span class="header-count">${state.currentQuestion > 0 ? `${state.currentQuestion} / ${questions.length - 1}` : ''}</span>
          </div>
          
          <div class="main">
            ${questionHTML}
          </div>
          
          <div class="nav">
            <div class="nav-inner">
              <button class="btn btn-back ${state.currentQuestion === 0 ? 'invisible' : ''}" id="btn-back">
                <svg width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
                Retour
              </button>
              
              ${isLastQuestion 
                ? `<button class="btn btn-submit" id="btn-next" ${!canProceed || state.isSubmitting ? 'disabled' : ''}>${submitBtnContent}</button>`
                : `<button class="btn btn-next" id="btn-next" ${!canProceed ? 'disabled' : ''}>
                    ${state.currentQuestion === 0 ? 'Commencer' : 'Continuer'}
                    <svg width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                  </button>`
              }
            </div>
          </div>
        </div>
      `;

      attachEvents();
    }

    function checkCanProceed() {
      const q = questions[state.currentQuestion];
      if (q.type === 'intro') return true;
      if (!q.required) return true;
      
      const value = state.formData[q.field];
      if (q.type === 'multiple') return value.length > 0;
      return value && value.trim() !== '';
    }

    function attachEvents() {
      const btnBack = document.getElementById('btn-back');
      const btnNext = document.getElementById('btn-next');
      const inputField = document.getElementById('input-field');
      
      if (btnBack) {
        btnBack.onclick = () => {
          state.currentQuestion--;
          render();
        };
      }
      
      if (btnNext) {
        btnNext.onclick = async () => {
          if (state.currentQuestion >= questions.length - 1) {
            await handleSubmit();
          } else {
            state.currentQuestion++;
            render();
          }
        };
      }
      
      if (inputField) {
        inputField.focus();
        
        inputField.oninput = (e) => {
          const q = questions[state.currentQuestion];
          state.formData[q.field] = e.target.value;
          updateNextButton();
        };
        
        inputField.onkeypress = (e) => {
          if (e.key === 'Enter' && !e.shiftKey && checkCanProceed() && state.currentQuestion < questions.length - 1) {
            e.preventDefault();
            state.currentQuestion++;
            render();
          }
        };
      }
      
      document.querySelectorAll('.option-btn').forEach(btn => {
        btn.onclick = () => {
          const q = questions[state.currentQuestion];
          state.formData[q.field] = btn.dataset.value;
          setTimeout(() => {
            if (state.currentQuestion < questions.length - 1) {
              state.currentQuestion++;
            }
            render();
          }, 200);
        };
      });
      
      document.querySelectorAll('.tag-btn').forEach(btn => {
        btn.onclick = () => {
          const q = questions[state.currentQuestion];
          const value = btn.dataset.value;
          const arr = state.formData[q.field];
          if (arr.includes(value)) {
            state.formData[q.field] = arr.filter(v => v !== value);
          } else {
            state.formData[q.field] = [...arr, value];
          }
          render();
        };
      });
    }
    
    function updateNextButton() {
      const btnNext = document.getElementById('btn-next');
      if (btnNext) {
        btnNext.disabled = !checkCanProceed();
      }
    }

    async function handleSubmit() {
      state.isSubmitting = true;
      render();
      
      try {
        await fetch(GOOGLE_SCRIPT_URL, {
          method: 'POST',
          mode: 'no-cors',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            ...state.formData,
            outilsUtilises: state.formData.outilsUtilises.join(', '),
            attentesFormation: state.formData.attentesFormation.join(', '),
            timestamp: new Date().toISOString()
          })
        });
      } catch (error) {
        console.error('Erreur:', error);
      }
      
      state.isSubmitting = false;
      state.isSubmitted = true;
      render();
    }

    render();
  </script>
</body>
</html>


